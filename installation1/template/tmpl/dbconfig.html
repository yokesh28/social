<jtmpl:comment>
@version	$Id: dbconfig.html 14401 2010-01-26 14:10:00Z louis $
@package	Joomla
@subpackage	Installation
@copyright	Copyright (C) 2005 - 2010 Open Source Matters. All rights reserved.
@license	GNU/GPL
</jtmpl:comment>

<script language="JavaScript" type="text/javascript">
<!--
	function validateForm( frm, task ) {
		var valid = document.formvalidator.isValid(frm);
		if (valid == false) {
			return false;
		}
		
		var DBhostname = getElementByName( frm, 'vars[DBhostname]' );
		var DBname = getElementByName( frm, 'vars[DBname]' );
		var DBPrefix = getElementByName( frm, 'vars[DBPrefix]' );

		var regex=/^[a-zA-Z]+[a-zA-Z0-9_]*$/;

		if (DBhostname.value == '') {
			alert( '<jtmpl:translate key="validHost" escape="yes">Please enter the host name</jtmpl:translate>' );
			return;
		} else if (DBname.value == '') {
			alert( '<jtmpl:translate key="validName" escape="yes">Please enter a database name</jtmpl:translate>' );
			return;
		} else if (DBPrefix.value == '') {
			alert('<jtmpl:translate key="validPrefix" escape="yes">You must enter a MySQL Table Prefix for Anahita™ to operate correctly</jtmpl:translate>');
			return;
		} else if (DBname.value.length > 64) {
			alert('<jtmpl:translate key="MYSQLDBNAMETOOLONG" escape="yes">The MySQL Database Name must be a maximum of 64 characters</jtmpl:translate>');
			return;
		} else if (DBPrefix.value.length > 15) {
			alert('<jtmpl:translate key="MYSQLPREFIXTOOLONG" escape="yes">The MySQL Table Prefix must be a maximum of 15 characters</jtmpl:translate>');
			return;
		} else if (!regex.test(DBPrefix.value)) {
			alert('<jtmpl:translate key="MYSQLPREFIXINVALIDCHARS" escape="yes">The MySQL Table Prefix must start with a letter, and be followed by only letters, numbers or underscores</jtmpl:translate>');
			return;
		} else {
			submitForm( frm, task );
		}
	}

	function JProcess( action ) {

		if (document.getElementById("vars_dbhostname").value == '') {
			alert( '<jtmpl:translate key="validHost" escape="yes">Please enter the host name</jtmpl:translate>' );
			return;
		} else if (document.getElementById("vars_dbusername").value == '') {
			alert( '<jtmpl:translate key="validUser" escape="yes">Please enter a database username</jtmpl:translate>' );
			return;
		}
	}
	Window.onDomReady(function(){$('vars_dbusername').focus()});
//-->
</script>

<form action="index.php" method="post" name="adminForm" id="adminForm" class="form-validate" autocomplete="off">
<div id="right">
	<div id="rightpad">
		<div id="step">
			<div class="t">
		<div class="t">
			<div class="t"></div>
		</div>
		</div>
		<div class="m">
				<div class="far-right">
					<a class="btn" onclick="submitForm( adminForm, 'preinstall' );"><i class="icon-circle-arrow-left"></i> Previous</a>
					<a class="btn btn-primary" onclick="validateForm( adminForm, 'makedb' );"><i class="icon-circle-arrow-right icon-white"></i> Next</a>
				</div>
				<span class="step"><jtmpl:translate>Database Configuration</jtmpl:translate></span>
			</div>
		<div class="b">
		<div class="b">
			<div class="b"></div>
		</div>
		</div>
	</div>

	<div id="installer">
			<div class="t">
		<div class="t">
			<div class="t"></div>
		</div>
		</div>
		<div class="m">

				<h2><jtmpl:translate>Connection Settings</jtmpl:translate>:</h2>
				<div class="install-text">
					<jtmpl:translate key="tipDatabaseSteps">
					<p>Setting up Anahita to run on your server involves 4 simple steps...</p>
					<p>Please enter the hostname of the server Anahita™ is to be installed on.</p>
					<p>Enter the MySQL username, password and database name you wish to use with Anahita™.</p>
					<p>Enter a prefix to be used by tables for this Anahita™ installation.</p>
					</jtmpl:translate>
				</div>
				<div class="install-body">
				<div class="t">
			<div class="t">
				<div class="t"></div>
			</div>
			</div>
			<div class="m">
			                
			                <fieldset>
			                     <legend><jtmpl:translate>Basic Settings</jtmpl:translate></legend>
			                     
			                     <div class="control-group">
			                         <label class="control-label" for="vars_dbhostname"><jtmpl:translate>Host Name</jtmpl:translate></label>
			                         <div class="controls">
			                             <input id="vars_dbhostname" class="inputbox validate required none dbhostnamemsg" type="text" name="vars[DBhostname]" value="{VAR_DBHOSTNAME}" />
			                             <p class="help-block"><jtmpl:translate key="tipHost">This is usually 'localhost'</jtmpl:translate></p>
			                         </div>
			                     </div>
			                     
			                     <div class="control-group">
			                         <label class="control-label" for="vars_dbusername"><jtmpl:translate>User Name</jtmpl:translate></label>
			                         <div class="controls">
			                             <input id="vars_dbusername" class="inputbox validate required none dbusernamemsg" type="text" name="vars[DBuserName]" value="{VAR_DBUSERNAME}" />
			                             <p class="help-block"><jtmpl:translate key="tipUser">Either something as 'root' or a username given by the hoster</jtmpl:translate></p>
			                         </div>
			                     </div>
			                     
			                     <div class="control-group">
			                         <label class="control-label" for="vars_dbpassword"><jtmpl:translate>Password</jtmpl:translate></label>
			                         <div class="controls">
			                             <input id="vars_dbpassword" class="inputbox" type="password" name="vars[DBpassword]" value="{VAR_DBPASSWORD}" />
			                             <p class="help-block"><jtmpl:translate key="tipPassword">For site security using a password for the mysql account is mandatory</jtmpl:translate></p>
			                         </div>
			                     </div>
			                     
			                      <div class="control-group">
                                     <label class="control-label" for="vars_dbname"><jtmpl:translate>Database Name</jtmpl:translate></label>
                                     <div class="controls">
                                        <input id="vars_dbname" class="inputbox validate required none dbnamemsg" type="text" name="vars[DBname]" value="{VAR_DBNAME}" />
                                         <p class="help-block"><jtmpl:translate key="tipDatabase">Some hosts allow only a certain DB name per site. Use table prefix in this case for distinct Anahita™ sites.</jtmpl:translate></p>
                                     </div>
                                 </div>
			                </fieldset>
			
			
			                <fieldset>
			                     <legend><jtmpl:translate>Advanced settings</jtmpl:translate></legend>
			                     
			                     <div class="control-group">
			                         <label class="control-label">
			                             <input id="vars_dbolddel" type="radio" name="vars[DBOld]" value="rm" /> 
			                             <jtmpl:translate>Drop Existing Tables</jtmpl:translate>
			                         </label>
			                     </div>
			                     
			                     <div class="control-group">     
			                         <label class="control-label">
                                         <input id="vars_dboldbackup" type="radio" name="vars[DBOld]" value="bu"  checked="checked"/>
                                         <jtmpl:translate>Backup Old Tables</jtmpl:translate>
                                     </label>
                                     <p class="help-block"><jtmpl:translate key="tipBackup">Any existing backup tables from former Anahita™ installations will be replaced</jtmpl:translate></p>
			                    </div>
			                    
			                    <div class="control-group">  
			                         <label class="control-label"><jtmpl:translate>Table Prefix</jtmpl:translate></label>
			                         <div class="controls">
			                             <input id="vars_dbprefix" class="inputbox" type="text" name="vars[DBPrefix]" value="{VAR_DBPREFIX}" />
			                             <p class="help-block"><jtmpl:translate key="tipPrefix">Dont use 'old_' since this is used for backup tables</jtmpl:translate></p>
			                         </div>
			                    </div>  
			                </fieldset>
			
						</div>
						<div class="clr"></div>
			</div>
			<div class="b">
				<div class="b">
					<div class="b"></div>
				</div>
			</div>
					<div class="clr"></div>
				</div>
		<div class="clr"></div>
		</div>
		<div class="b">
			<div class="b">
				<div class="b"></div>
			</div>
		</div>
		</div>
	</div>
</div>


<div class="clr"></div>
<input type="hidden" id="vars_lang" name="vars[lang]" value="en-GB" />
<input type="hidden" id="vars_dbtype" name="vars[DBType]" value="mysqli" />
<input type="hidden" name="task" value="" />
<input type="hidden" name="vars[ftpEnable]" value="0" />
</form>


